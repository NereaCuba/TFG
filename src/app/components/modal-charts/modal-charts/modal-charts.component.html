<div class="backColor" *ngIf="authService.userInfo as user">
    <div class="container dashBoard2" *ngIf="user.charts && user.charts.length !== 0">
        <div class="card" data-aos="fade-up" data-aos-duration="2000">
            <div class="container p-4">
                <p-dataView #dv [value]="user.charts" [rows]="3" [paginator]="true" [sortField]="sortField" [sortOrder]="sortOrder">
                    <ng-template pTemplate="header">
                        <div class="d-flex justify-content-between">
                            <div class="flex flex-column lg:flex-row lg:justify-content-between">
                                <p-dropdown [options]="sortOptions" placeholder="Ordenar por fecha" (onChange)="onSortChange($event)" styleClass="mb-2 lg:mb-0"></p-dropdown>
                            </div>
                        </div>
                    </ng-template>
                    <ng-template let-product let-index="rowIndex"  pTemplate="listItem">
                        <div class="col-12 hoveredCursor">
                            <div class="row p-4">
                                <div class="col-12 col-lg-4" *ngIf="!product.isIframe">
                                    <img class="w-100" src="{{product.image}}" alt="Imagen del gráfico" />
                                </div>
                                <div class="col-12 w-100 h-100 overflow-scroll" *ngIf="product.isIframe">
                                    <iframe [src]="product.image | safe " style="width: 100%; height: 50em; border: 0px none; overflow: scroll;"></iframe>
                                </div>
                                    <div class="col-12" [ngClass]="product.isIframe ? '' : 'col-lg-8'">
                                    <div class="d-flex flex-column justify-content-between align-items-between h-100">
                                        <div class="flex flex-column align-items-center ">
                                            <h4>Gráfico {{index + 1}}</h4>
                                            <div class="">
                                                <span class="flex align-items-center gap-2">
                                                    <i class="pi pi-calendar"></i>
                                                    <span class="ms-2 font-semibold">{{getCurrentDate(product.fechaCreacion)}}</span>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-lg-5 mt-4 col d-flex justify-content-center align-items-center d-none d-lg-block">
                                            <p [ngClass]="'Score' + getScoreInt(getPunctuation(product.formValue))">{{constLinkertBrief[getScore(getPunctuation(product.formValue))]}}</p>
                                        </div>
                                        <div class="d-flex mt-4 justify-content-between">
                                            <h6>PUNTUACIÓN TOTAL: {{getPunctuation(product.formValue)}}</h6>
                                            <div class="d-flex">
                                                <button pButton icon="pi pi-download" (click)="downloadResults(product.formValue)" class="lg:align-self-end mb-2 p-button-rounded"></button>
                                                <button pButton icon="pi pi-trash" (click)="deleteElement(user.email, product)" class="ms-4 lg:align-self-end mb-2 p-button-rounded p-button-danger"></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </p-dataView>
            </div>
        </div>
    </div>
</div>
