"use strict";(self.webpackChunkangular_tfg=self.webpackChunkangular_tfg||[]).push([[298],{3298:(P,h,n)=>{n.r(h),n.d(h,{evaluateDetailStatusModule:()=>c});var m=n(6895),f=n(6132),g=n(4629),Z=n(5861),t=n(4650),v=n(419),b=n(1620),p=n(3662),x=n(1481);class u{constructor(e){this._sanitizer=e}transform(e){return this._sanitizer.bypassSecurityTrustResourceUrl(e)}}u.\u0275fac=function(e){return new(e||u)(t.Y36(x.H7,16))},u.\u0275pipe=t.Yjl({name:"safe",type:u,pure:!0});const C=["pdfResults"];function w(a,e){if(1&a&&(t.TgZ(0,"div",23),t._UZ(1,"iframe",24),t.ALo(2,"safe"),t.qZA()),2&a){const o=t.oxw();t.xp6(1),t.Q6J("src",t.lcZ(2,1,o.imgURL),t.uOi)}}function A(a,e){if(1&a&&t._UZ(0,"img",25),2&a){const o=t.oxw();t.s9C("src",o.imgURL,t.LSH)}}function L(a,e){if(1&a&&(t.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"h6",26),t._uU(4),t.qZA(),t.TgZ(5,"h6"),t._uU(6),t.qZA()(),t.TgZ(7,"div",27)(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"div",28)(11,"p",29),t._uU(12),t.qZA()(),t.TgZ(13,"div",18)(14,"p"),t._uU(15),t.qZA()(),t.TgZ(16,"div",18)(17,"p"),t._uU(18),t.qZA()()(),t._UZ(19,"hr"),t.qZA()),2&a){const o=e.$implicit,i=e.index,r=t.oxw();t.xp6(4),t.hij("H",i+1," - "),t.xp6(2),t.Oqu(r.constHeuristicsTitles[i]),t.xp6(3),t.Oqu(r.constLikertValues[o.optionLinkert]),t.xp6(2),t.Q6J("ngClass","Score"+o.optionLinkert),t.xp6(1),t.Oqu(r.constLikert[o.optionLinkert]),t.xp6(3),t.hij("x",r.constWeightHeuristics[i],""),t.xp6(3),t.Oqu(r.scoreAll[i])}}class d{constructor(e,o,i,r,s){this.router=e,this.authService=o,this.evaluateService=i,this.route=r,this.fireStoreSvc=s,this.formValue=[],this.oldFormValue=[],this.constLikertValues=["NA","NP","0","1","2","3","4"],this.constLikert=["NA - No aplica","NP - No es problema","0 - No cumplimiento","1 - Cumplimiento bajo","2 - Cumplimiento aceptable","3 - Cumplimiento alto","4 - Cumplimiento excelente"],this.constHeuristicsTitles=["T\xedtulo","Leyenda","Ejes","Pie","Abreviaturas","Fuente de datos","Versi\xf3n impresa","Alternativa textual","Descripci\xf3n larga","Colores seguros","Contraste","Legibilidad","Calidad de la imagen","Redimensionado","Sin obst\xe1culos en la visualizaci\xf3n","Foco visible","Navegaci\xf3n independiente del dispositivo","Personalizaci\xf3n"],this.typeImport="imgUpload",this.nameFile="No se ha seleccionado ning\xfan archivo",this.file=null,this.inputValue="",this.isIFrame=!1,this.imgURL=null,this.URLLink="",this.image=null,this.dataSource={},this.constWeightHeuristics=[1,1,1,1,1,1,1,1,3,3,3,2,3,2,3,1,3,2],this.scoreAll=[],this.totalResult=0,this.globalResults=[],this.headers=["Heuristica","Seleccion","Peso","Nota"]}ngOnInit(){var e=this;return(0,Z.Z)(function*(){if(e.authService.isLoggedIn)try{var o=JSON.parse(localStorage.getItem("user")),i=yield e.authService.getUserData(o.email);let s=parseInt(e.route.snapshot.queryParams.chartID);var r=i.charts[s];e.formValue=r.formValue,yield e.calculatePonderation(),e.URLLink=r.image,e.getImageFromURL()}catch(s){console.log("Error while parsing user information. Error: "+s)}})()}redirectToEvaluate(){this.redirectTo("/evaluate")}getImageFromURL(){try{var o=this.URLLink.split(".");["svg","jpeg","jpg","pjp","png","pjpeg","ico","cur","gif","apng"].includes(o[o.length-1].toLowerCase())?this.imgURL=this.URLLink:(this.imgURL=this.URLLink,this.isIFrame=!0)}catch{this.isIFrame=!1}}downloadResults(){this.evaluateService.csvDownload(this.headers,this.globalResults)}calculatePonderation(){var e=0,o=0;this.formValue.forEach((r,s)=>{if(0!=r.optionLinkert&&1!=r.optionLinkert){var y=(r.optionLinkert-2)*this.constWeightHeuristics[s],R=4*this.constWeightHeuristics[s];e+=y,o+=R,this.scoreAll.push((10*y/R).toFixed(2))}else this.scoreAll.push(0!=r.optionLinkert?"NP":"NA");this.globalResults.push({heuristica:"H"+(s+1)+" - "+this.constHeuristicsTitles[s],seleccion:this.constLikert[r.optionLinkert],peso:this.constWeightHeuristics[s],nota:this.scoreAll.at(s)})}),this.totalResult=(10*e/o).toFixed(2),this.globalResults.push({heuristica:"NOTA GLOBAL",nota:this.totalResult});const i={chart:{caption:"Puntuaci\xf3n global del gr\xe1fico",subcaption:"Valor ponderado en base 10",lowerLimit:"0",upperLimit:"10",showGaugeBorder:"1",gaugeBorderThickness:"2",theme:"fusion"},colorRange:{color:[{minValue:"0",maxValue:"2",code:"#fb7272",borderColor:"#00000",borderAlpha:"100"},{minValue:"2",maxValue:"4",code:"#ffb453",borderColor:"#00000",borderAlpha:"100"},{minValue:"4",maxValue:"6",code:"#fff559",borderColor:"#00000",borderAlpha:"100"},{minValue:"6",maxValue:"8",code:"#b6fb62",borderColor:"#00000",borderAlpha:"100"},{minValue:"8",maxValue:"10",code:"#7beaa6",borderColor:"#00000",borderAlpha:"100"}]},dials:{dial:[{value:this.totalResult.toString()}]}};this.dataSource=i}redirectTo(e){this.router.navigateByUrl("/",{skipLocationChange:!1}).then(()=>this.router.navigate([e]))}}d.\u0275fac=function(e){return new(e||d)(t.Y36(g.F0),t.Y36(f.e),t.Y36(v.O),t.Y36(g.gz),t.Y36(b.g))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-evaluate-detail"]],viewQuery:function(e,o){if(1&e&&t.Gf(C,5),2&e){let i;t.iGM(i=t.CRH())&&(o.pdfResults=i.first)}},decls:46,vars:5,consts:[["aria-label","breadcrumb",1,"breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item",3,"click"],["aria-current","page",1,"breadcrumb-item","active"],["id","pdfResults",1,"mt-5"],[1,"text-center"],[1,"mt-5","container"],[1,"row","align-items-center","justify-content-center"],["class","col-12 col-md-6 ovHidden",4,"ngIf"],["class","chartImgResult col-12 col-md-6","alt","Gr\xe1fico introducido",3,"src",4,"ngIf"],[1,"col-12","col-md-6","ps-1","text-center"],[1,"mt-2"],["width","700","height","400","type","angulargauge","dataFormat","json",1,"d-none","d-lg-block",3,"dataSource"],["src","./assets/formula.png","alt","Formula utilizada",1,"w-100"],[1,"mt-5","container","text-center"],[1,"containerResults"],[1,"row"],[1,"col-lg-4","col","d-flex","justify-content-center","align-items-center"],[1,"col-lg-2","col","d-flex","justify-content-center","align-items-center"],[4,"ngFor","ngForOf"],[1,"containerButtons","row","justify-content-center","mt-5"],[1,"col-12","col-lg-5","buttonEndForm",3,"click"],[1,"pi","pi-download"],[1,"col-12","col-md-6","ovHidden"],[2,"width","100vw","height","600px","border","0px none",3,"src"],["alt","Gr\xe1fico introducido",1,"chartImgResult","col-12","col-md-6",3,"src"],[1,"d-none","d-md-block"],[1,"col-lg-4","col","d-flex","justify-content-center","align-items-center","d-lg-none"],[1,"col-lg-4","col","d-flex","justify-content-center","align-items-center","d-none","d-lg-block"],[3,"ngClass"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),t.NdJ("click",function(){return o.redirectTo("/dashboard")}),t._uU(3,"Perfil"),t.qZA(),t.TgZ(4,"li",3),t._uU(5,"Detalle del resultado de la evaluaci\xf3n"),t.qZA()()(),t.TgZ(6,"div",4)(7,"h2",5),t._uU(8,"RESULTADOS"),t.qZA(),t.TgZ(9,"div",6)(10,"div",7),t.YNc(11,w,3,3,"div",8),t.YNc(12,A,1,1,"img",9),t.TgZ(13,"div",10)(14,"span",11)(15,"p"),t._uU(16,"La puntuaci\xf3n global de tu gr\xe1fico es la siguiente:"),t.qZA(),t.TgZ(17,"h4"),t._uU(18),t.qZA()(),t._UZ(19,"fusioncharts",12),t.TgZ(20,"span",11)(21,"p"),t._uU(22,"Se ha calculado utilizando la siguiente f\xf3rmula matem\xe1tica"),t.qZA()(),t.TgZ(23,"div",11),t._UZ(24,"img",13),t.qZA()()()(),t.TgZ(25,"div",14)(26,"div",15)(27,"div",16)(28,"div",17)(29,"h6"),t._uU(30,"Heur\xedstica"),t.qZA()(),t.TgZ(31,"div",17)(32,"h6"),t._uU(33,"Resultado seleccionado"),t.qZA()(),t.TgZ(34,"div",18)(35,"h6"),t._uU(36,"Peso"),t.qZA()(),t.TgZ(37,"div",18)(38,"h6"),t._uU(39,"Nota ponderada"),t.qZA()()(),t._UZ(40,"hr"),t.YNc(41,L,20,7,"div",19),t.qZA()(),t.TgZ(42,"div",20)(43,"button",21),t.NdJ("click",function(){return o.downloadResults()}),t._UZ(44,"i",22),t._uU(45," DESCARGAR"),t.qZA()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",o.isIFrame),t.xp6(1),t.Q6J("ngIf",!o.isIFrame),t.xp6(6),t.hij("",o.totalResult,"/10"),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("ngForOf",o.formValue))},dependencies:[m.mk,m.sg,m.O5,p.PZ,u],styles:['@import"https://fonts.googleapis.com/css2?family=Karla:wght@200;700&display=swap";@import"https://fonts.googleapis.com/css2?family=Raleway:wght@200..900";h5[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;text-transform:uppercase;font-weight:700;letter-spacing:.2em;color:var(--app-primary-color)}.breadcrumb[_ngcontent-%COMP%]{margin-top:2em;margin-left:2em;font-family:Raleway,sans-serif}.breadcrumb[_ngcontent-%COMP%]:hover{cursor:pointer}.chartImgResult[_ngcontent-%COMP%]{width:250px}@media screen and (min-width: 960px){.chartImgResult[_ngcontent-%COMP%]{padding:1em!important;width:550px}}.buttonEndForm[_ngcontent-%COMP%]{box-sizing:border-box;height:49px;width:13em;color:#e8e8e8;text-transform:uppercase;font-family:Karla,sans-serif;font-weight:700;font-style:normal;letter-spacing:.25em;background:var(--app-primary-color);border:1px solid #000000}.Score0[_ngcontent-%COMP%], .Score1[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;font-weight:700;border:2px solid black;font-family:Raleway,sans-serif;background-color:#d3d3d3;padding:1em;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto;width:100%}.Score2[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;font-weight:700;width:100%;border:2px solid black;font-family:Raleway,sans-serif;background-color:#fb7272;padding:1em;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score3[_ngcontent-%COMP%]{text-transform:uppercase;border:2px solid black;letter-spacing:.15em;font-weight:700;font-family:Raleway,sans-serif;background-color:#ffb453;padding:1em;width:100%;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score4[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;width:100%;font-weight:700;border:2px solid black;font-family:Raleway,sans-serif;background-color:#fff559;padding:1em;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score5[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;border:2px solid black;font-weight:700;width:100%;font-family:Raleway,sans-serif;background-color:#b6fb62;padding:1em;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score6[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;font-weight:700;width:100%;font-family:Raleway,sans-serif;background-color:#7beaa6;padding:1em;border:2px solid black;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.ovHidden[_ngcontent-%COMP%]{overflow:scroll}']});const S=[{path:"",component:d}];class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[g.Bz.forChild(S),g.Bz]});var U=n(2353),T=n(409),k=n(1255),O=n(1493);p.Qf.fcRoot(U,T,k);class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({providers:[f.e,b.g,v.O],imports:[m.ez,O.S,p.Qf,l]})}}]);