(self.webpackChunkangular_tfg=self.webpackChunkangular_tfg||[]).push([[923],{6923:(Z,O,i)=>{"use strict";i.r(O),i.d(O,{dashboardStatusModule:()=>M});var C=i(6895),b=i(6132),_=i(4629),g=i(5861),T=i(7123),f=i.n(T),t=i(4650),x=i(1620),v=i(419),r=i(7604),a=i(805),m=i(504),s=i(5593),p=i(1481);class w{constructor(o){this._sanitizer=o}transform(o){return this._sanitizer.bypassSecurityTrustResourceUrl(o)}}function E(n,o){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"div",3),t.TgZ(2,"h5",4),t._uU(3,"Cargando..."),t.qZA()())}function S(n,o){if(1&n&&(t.TgZ(0,"h4",23),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.displayName?e.displayName:"User")}}function L(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"h6",25),t._uU(2,"N\xfamero de gr\xe1ficos totales analizados"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA()()),2&n){const e=o.ngIf;t.xp6(4),t.Oqu(e.charts&&e.charts.length?e.charts.length:"0")}}function P(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"h6",25),t._uU(2,"Gr\xe1ficos con una puntuaci\xf3n superior a 8"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA()()),2&n){const e=t.oxw(4);t.xp6(4),t.Oqu(e.numAproved?e.numAproved:"0")}}function y(n,o){if(1&n&&(t.TgZ(0,"div",10)(1,"div",15)(2,"div",16)(3,"div",17),t._UZ(4,"img",18),t.YNc(5,S,2,1,"h4",19),t.TgZ(6,"p",20),t._UZ(7,"i",21),t._uU(8),t.qZA()()()(),t.YNc(9,L,5,1,"div",22),t.YNc(10,P,5,1,"div",22),t.qZA()),2&n){const e=o.ngIf,c=t.oxw(3);t.xp6(4),t.s9C("src",e.photoURL?e.photoURL:"./assets/avatar-default-icon.png",t.LSH),t.s9C("alt",e.displayName),t.xp6(1),t.Q6J("ngIf",e.displayName),t.xp6(3),t.hij(" ",e.email," "),t.xp6(1),t.Q6J("ngIf",c.authService.userInfo),t.xp6(1),t.Q6J("ngIf",c.authService.userInfo)}}function N(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"p-dropdown",34),t.NdJ("onChange",function(l){t.CHM(e);const d=t.oxw(4);return t.KtG(d.onSortChange(l))}),t.qZA()()()}if(2&n){const e=t.oxw(4);t.xp6(2),t.Q6J("options",e.sortOptions)}}function B(n,o){if(1&n&&(t.TgZ(0,"div",53),t._UZ(1,"img",54),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("src",e.image,t.LSH)}}function R(n,o){if(1&n&&(t.TgZ(0,"div",55),t._UZ(1,"iframe",56),t.ALo(2,"safe"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",t.lcZ(2,1,e.image),t.uOi)}}function j(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(){const d=t.CHM(e).rowIndex,u=t.oxw(4);return t.KtG(u.evaluateShow(d))}),t.TgZ(1,"div",36),t.YNc(2,B,2,1,"div",37),t.YNc(3,R,3,3,"div",38),t.TgZ(4,"div",39)(5,"div",40)(6,"div",41)(7,"h4"),t._uU(8),t.qZA(),t.TgZ(9,"div",42)(10,"span",43),t._UZ(11,"i",44),t.TgZ(12,"span",45),t._uU(13),t.qZA()()()(),t.TgZ(14,"div",46)(15,"p",47),t._uU(16),t.qZA()(),t.TgZ(17,"div",48)(18,"h6"),t._uU(19),t.qZA(),t.TgZ(20,"div",49)(21,"button",50),t.NdJ("click",function(){const d=t.CHM(e).$implicit,u=t.oxw(4);return t.KtG(u.downloadResults(d.formValue))}),t.qZA(),t.TgZ(22,"button",51),t.NdJ("click",function(){const d=t.CHM(e).rowIndex,u=t.oxw(4);return t.KtG(u.evaluateShow(-1==u.sortOrder?5-d:d))}),t.qZA(),t.TgZ(23,"button",52),t.NdJ("click",function(){const d=t.CHM(e).$implicit,u=t.oxw(2).ngIf,h=t.oxw(2);return t.KtG(h.deleteElement(u.email,d))}),t.qZA()()()()()()()}if(2&n){const e=o.$implicit,c=o.rowIndex,l=t.oxw(4);t.xp6(2),t.Q6J("ngIf",!e.isIframe),t.xp6(1),t.Q6J("ngIf",e.isIframe),t.xp6(1),t.Q6J("ngClass",e.isIframe?"":"col-lg-8"),t.xp6(4),t.hij("Gr\xe1fico ",c+1,""),t.xp6(5),t.Oqu(l.getCurrentDate(e.fechaCreacion)),t.xp6(2),t.Q6J("ngClass","Score"+l.getScoreInt(l.getPunctuation(e.formValue))),t.xp6(1),t.Oqu(l.constLinkertBrief[l.getScore(l.getPunctuation(e.formValue))]),t.xp6(3),t.hij("PUNTUACI\xd3N TOTAL: ",l.getPunctuation(e.formValue),"")}}function F(n,o){if(1&n&&(t.TgZ(0,"div",26)(1,"div",8)(2,"div",27)(3,"p-dataView",28,29),t.YNc(5,N,3,1,"ng-template",30),t.YNc(6,j,24,8,"ng-template",31),t.qZA()()()()),2&n){const e=t.oxw().ngIf,c=t.oxw(2);t.xp6(3),t.Q6J("value",e.charts)("rows",3)("paginator",!0)("sortField",c.sortField)("sortOrder",c.sortOrder)}}function H(n,o){if(1&n&&(t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"div",12),t.YNc(7,y,11,6,"div",13),t.qZA()()()()()(),t.YNc(8,F,7,5,"div",14),t.qZA()),2&n){const e=o.ngIf,c=t.oxw(2);t.xp6(7),t.Q6J("ngIf",c.authService.userData),t.xp6(1),t.Q6J("ngIf",e.charts&&0!==e.charts.length)}}function J(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,H,9,2,"div",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.authService.userInfo)}}w.\u0275fac=function(o){return new(o||w)(t.Y36(p.H7,16))},w.\u0275pipe=t.Yjl({name:"safe",type:w,pure:!0});class I{constructor(o,e,c,l,d){this.router=o,this.authService=e,this.fireStoreSvc=c,this.route=l,this.evaluateService=d,this.allUsers=[],this.currentUser=[],this.scoreAll=[],this.numAproved=0,this.constHeuristicsTitles=["T\xedtulo","Leyenda","Ejes","Pie","Abreviaturas","Fuente de datos","Versi\xf3n impresa","Alternativa textual","Descripci\xf3n larga","Colores seguros","Contraste","Legibilidad","Calidad de la imagen","Redimensionado","Sin obst\xe1culos en la visualizaci\xf3n","Foco visible","Navegaci\xf3n independiente del dispositivo","Personalizaci\xf3n"],this.headers=["Heuristica","Seleccion","Peso","Nota"],this.layout="list",this.constLinkertBrief=["No cumplimiento","Cumplimiento bajo","Cumplimiento aceptable","Cumplimiento alto","Cumplimiento excelente"],this.constLikert=["NA - No aplica","NP - No es problema","0 - No cumplimiento","1 - Cumplimiento bajo","2 - Cumplimiento aceptable","3 - Cumplimiento alto","4 - Cumplimiento excelente"],this.constWeightHeuristics=[1,1,1,1,1,1,1,1,3,3,3,2,3,2,3,1,3,2],this.loading=!0,this.loaded=!1,f().init()}ngOnInit(){var o=this;return(0,g.Z)(function*(){o.loading=!0,o.loaded=!1,o.sortOptions=[{label:"Fecha ascendente",value:"!fechaCreacion"},{label:"Fecha descendente",value:"fechaCreacion"}];var e=JSON.parse(localStorage.getItem("user"));o.authService.userInfo=yield o.authService.getUserData(e.email),o.authService.userInfo&&o.authService.userInfo.charts&&(o.numAproved=o.authService.userInfo.charts.filter(c=>parseInt(o.getPunctuation(c.formValue))>=8).length),o.loading=!1,o.loaded=!0})()}onSortChange(o){let e=o.value;0===e.indexOf("!")?(this.sortOrder=-1,this.sortField=e.substring(1,e.length)):(this.sortOrder=1,this.sortField=e),console.log(this.sortOrder)}getCurrentDate(o){return new Date(1e3*o.seconds+o.nanoseconds/1e6).toISOString().split("T")[0]}getScore(o){return 10==o?4:Math.floor(o/2)}getScoreInt(o){return 10==o?5:Math.floor(o/2)+1}getPunctuation(o){var e=0,c=0;return o.forEach((l,d)=>{if(0!=l.optionLinkert&&1!=l.optionLinkert){var u=(l.optionLinkert-2)*this.constWeightHeuristics[d],h=4*this.constWeightHeuristics[d];e+=u,c+=h,this.scoreAll.push((10*u/h).toFixed(2))}else this.scoreAll.push(0!=l.optionLinkert?"NP":"NA")}),(10*e/c).toFixed(2)}redirectTo(o,e){this.router.navigateByUrl("/",{skipLocationChange:!1}).then(()=>this.router.navigate([o],{queryParams:{chartID:e}}))}evaluateShow(o){this.redirectTo("/evaluate-detail",o)}downloadResults(o){var e=[],c=0,l=0;o.forEach((u,h)=>{if(0!=u.optionLinkert&&1!=u.optionLinkert){var D=(u.optionLinkert-2)*this.constWeightHeuristics[h],U=4*this.constWeightHeuristics[h];c+=D,l+=U,this.scoreAll.push((10*D/U).toFixed(2))}else this.scoreAll.push(0!=u.optionLinkert?"NP":"NA");e.push({heuristica:"H"+(h+1)+" - "+this.constHeuristicsTitles[h],seleccion:this.constLikert[u.optionLinkert],peso:this.constWeightHeuristics[h],nota:this.scoreAll.at(h)})});var d=(10*c/l).toFixed(2);e.push({heuristica:"NOTA GLOBAL",nota:d}),this.evaluateService.csvDownload(this.headers,e)}deleteElement(o,e){this.fireStoreSvc.deleteUserChart(o,e),this.ngOnInit()}}I.\u0275fac=function(o){return new(o||I)(t.Y36(_.F0),t.Y36(b.e),t.Y36(x.g),t.Y36(_.gz),t.Y36(v.O))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[["class","d-flex justify-content-center flex-column align-items-center mt-4",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center","flex-column","align-items-center","mt-4"],["role","status",1,"spinner-border","mt-4","mb-4"],[1,"text-center","mt-4","loadingFont"],["class","backColor",4,"ngIf"],[1,"backColor"],[1,"container","dashBoard"],["data-aos","fade-up","data-aos-duration","2000",1,"card"],[1,"container"],[1,"row"],[1,"col-12","ml-sm-auto","p-4"],[1,"inner-adjust"],["class","row",4,"ngIf"],["class","container dashBoard2",4,"ngIf"],[1,"col-12","col-lg-4","col-xl-2","p-4"],[1,"media","mt-2"],[1,"justify-content-center","align-items-center","headerCard"],[1,"img-thumbnail","rounded-circle","mb-4",3,"src","alt"],["class","mb-2 text-lg-start text-center",4,"ngIf"],[1,"d-lg-flex","align-items-center","justify-lg-content-center","text-lg-start","text-center"],[1,"pi","pi-envelope","me-2"],["class","col-xl-4 col-lg-4  text-center col-12 d-flex flex-column align-items-center justify-content-center pt-6",4,"ngIf"],[1,"mb-2","text-lg-start","text-center"],[1,"col-xl-4","col-lg-4","text-center","col-12","d-flex","flex-column","align-items-center","justify-content-center","pt-6"],[1,"mt-5"],[1,"container","dashBoard2"],[1,"container","p-4"],[3,"value","rows","paginator","sortField","sortOrder"],["dv",""],["pTemplate","header"],["pTemplate","listItem"],[1,"d-flex","justify-content-between"],[1,"flex","flex-column","lg:flex-row","lg:justify-content-between"],["placeholder","Ordenar por fecha","styleClass","mb-2 lg:mb-0",3,"options","onChange"],[1,"col-12","hoveredCursor",3,"click"],[1,"row","p-4"],["class","col-12 col-lg-4",4,"ngIf"],["class","col-12 w-100 h-100 overflow-scroll",4,"ngIf"],[1,"col-12",3,"ngClass"],[1,"d-flex","flex-column","justify-content-between","align-items-between","h-100"],[1,"flex","flex-column","align-items-center"],[1,""],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-calendar"],[1,"ms-2","font-semibold"],[1,"col-lg-5","mt-4","col","d-flex","justify-content-center","align-items-center","d-none","d-lg-block"],[3,"ngClass"],[1,"d-flex","mt-4","justify-content-between"],[1,"d-flex"],["pButton","","icon","pi pi-download",1,"lg:align-self-end","mb-2","p-button-rounded",3,"click"],["pButton","","icon","pi pi-eye",1,"ms-4","lg:align-self-end","mb-2","p-button-rounded",3,"click"],["pButton","","icon","pi pi-trash",1,"ms-4","lg:align-self-end","mb-2","p-button-rounded","p-button-danger",3,"click"],[1,"col-12","col-lg-4"],["alt","Imagen del gr\xe1fico",1,"w-100",3,"src"],[1,"col-12","w-100","h-100","overflow-scroll"],[2,"width","100%","height","50em","border","0px none","overflow","scroll",3,"src"]],template:function(o,e){1&o&&(t.YNc(0,E,4,0,"div",0),t.YNc(1,J,2,1,"div",1)),2&o&&(t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",e.loaded))},dependencies:[C.mk,C.O5,r.VO,a.jx,m.Lt,s.Hq,w],styles:['@import"https://fonts.googleapis.com/css2?family=Karla:wght@200;700&display=swap";@import"https://fonts.googleapis.com/css2?family=Raleway:wght@200..900";.backColor[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}.backColor[_ngcontent-%COMP%]   .dashBoard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .backColor[_ngcontent-%COMP%]   .dashBoard2[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:2em;box-shadow:2px 2px 20px #a1a1a1}.backColor[_ngcontent-%COMP%]   .dashBoard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .buttonLogOut[_ngcontent-%COMP%], .backColor[_ngcontent-%COMP%]   .dashBoard2[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .buttonLogOut[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:3em;background-color:var(--app-primary-color);color:var(--app-secondary-color);border:none}.dashBoard[_ngcontent-%COMP%]{padding:6em 1em}.dashBoard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:rgb(121,117,191);background:linear-gradient(90deg,var(--app-primary-color),rgb(213,213,244) 33%,rgb(255,255,255) 100%);background-size:100% 40%;background-repeat:no-repeat}h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;text-transform:uppercase;font-weight:700;color:var(--app-primary-color)}.dashBoard2[_ngcontent-%COMP%]{padding:4em 1em}.dashBoard2[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .dashBoard2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .dashBoard2[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .dashBoard2[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;text-transform:uppercase;font-weight:700;letter-spacing:.2em;color:var(--app-primary-color)}.Score0[_ngcontent-%COMP%], .Score1[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;font-weight:700;width:100%;border:2px solid black;font-family:Raleway,sans-serif;background-color:#fb7272;padding:1em;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score2[_ngcontent-%COMP%]{text-transform:uppercase;border:2px solid black;letter-spacing:.15em;font-weight:700;font-family:Raleway,sans-serif;background-color:#ffb453;padding:1em;width:100%;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score3[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;width:100%;font-weight:700;border:2px solid black;font-family:Raleway,sans-serif;background-color:#fff559;padding:1em;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score4[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;border:2px solid black;font-weight:700;width:100%;font-family:Raleway,sans-serif;background-color:#b6fb62;padding:1em;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.Score5[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;font-weight:700;width:100%;font-family:Raleway,sans-serif;background-color:#7beaa6;padding:1em;border:2px solid black;border-radius:1em;color:#000;margin-bottom:auto;margin-top:auto}.hoveredCursor[_ngcontent-%COMP%]:hover{cursor:pointer}']});const Y=[{path:"",component:I}];class A{}A.\u0275fac=function(o){return new(o||A)},A.\u0275mod=t.oAB({type:A}),A.\u0275inj=t.cJS({imports:[_.Bz.forChild(Y),_.Bz]});var Q=i(6679),k=i(433),W=i(4372);class M{}M.\u0275fac=function(o){return new(o||M)},M.\u0275mod=t.oAB({type:M}),M.\u0275inj=t.cJS({providers:[b.e,x.g,v.O,_.Bz],imports:[C.ez,r.FI,k.UX,k.u5,Q.W,m.kW,s.hJ,W.U,A]})},419:(Z,O,i)=>{"use strict";i.d(O,{O:()=>g});var C=i(4327),_=i(4650);class g{constructor(){}csvDownload(f,t){if(!t||!t.length)return;const v=f.join(",")+"\n"+t.map(r=>f.map(a=>null===r[a.toLowerCase().replaceAll(" ","_")]||void 0===r[a.toLowerCase().replaceAll(" ","_")]?"":r[a.toLowerCase().replaceAll(" ","_")]).join(",")).join("\n");this.exportFile(v,"text/csv;charset=utf-8;")}exportFile(f,t){const x=new Blob([f],{type:t});var v=(new Date).toISOString().split("T")[0];C.saveAs(x,"ChartEvaluation"+v)}}g.\u0275fac=function(f){return new(f||g)},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac})},4327:function(Z,O){var i,b;void 0!==(b="function"==typeof(i=function(){"use strict";function g(r,a,m){var s=new XMLHttpRequest;s.open("GET",r),s.responseType="blob",s.onload=function(){v(s.response,a,m)},s.onerror=function(){console.error("could not download file")},s.send()}function T(r){var a=new XMLHttpRequest;a.open("HEAD",r,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function f(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}}var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,x=t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype&&!x?function(r,a,m){var s=t.URL||t.webkitURL,p=document.createElement("a");p.download=a=a||r.name||"download",p.rel="noopener","string"==typeof r?(p.href=r,p.origin===location.origin?f(p):T(p.href)?g(r,a,m):f(p,p.target="_blank")):(p.href=s.createObjectURL(r),setTimeout(function(){s.revokeObjectURL(p.href)},4e4),setTimeout(function(){f(p)},0))}:"msSaveOrOpenBlob"in navigator?function(r,a,m){if(a=a||r.name||"download","string"!=typeof r)navigator.msSaveOrOpenBlob(function _(r,a){return typeof a>"u"?a={autoBom:!1}:"object"!=typeof a&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\ufeff",r],{type:r.type}):r}(r,m),a);else if(T(r))g(r,a,m);else{var s=document.createElement("a");s.href=r,s.target="_blank",setTimeout(function(){f(s)})}}:function(r,a,m,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof r)return g(r,a,m);var p="application/octet-stream"===r.type,w=/constructor/i.test(t.HTMLElement)||t.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||p&&w||x)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var y=S.result;y=E?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=y:location=y,s=null},S.readAsDataURL(r)}else{var L=t.URL||t.webkitURL,P=L.createObjectURL(r);s?s.location=P:location.href=P,s=null,setTimeout(function(){L.revokeObjectURL(P)},4e4)}});t.saveAs=v.saveAs=v,Z.exports=v})?i.apply(O,[]):i)&&(Z.exports=b)}}]);